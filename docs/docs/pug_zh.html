<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="renderer" content="webkit">
  <meta name="author" content="xovel">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pug</title>
  <link href="../assets/github.css" rel="stylesheet">
  <link href="../assets/docs.css" rel="stylesheet">

  <link href="./spec/pug.css" rel="stylesheet">

</head>
<body>

<header class="box">Pug</header>

<div id="expand"></div>

<div class="box" id="main">
  <nav id="menu">
    <ul>
      <li><h3>API</h3></li>
      <li><a href="#/api/getting-started">Getting Started</a></li>
      <li><a href="#/api/express">Express Integration</a></li>
      <li><a href="#/api/reference">Reference</a></li>
      <li><a href="#/api/migration-v2">Migrating to Pug 2</a></li>
      <li><a href="https://github.com/pugjs/babel-plugin-transform-react-pug">React Integration</a></li>
      <li><h3>Language Reference</h3></li>
      <li><a href="#/language/attributes">Attributes</a></li>
      <li><a href="#/language/case">Case</a></li>
      <li><a href="#/language/code">Code</a></li>
      <li><a href="#/language/comments">Comments</a></li>
      <li><a href="#/language/conditionals">Conditionals</a></li>
      <li><a href="#/language/doctype">Doctype</a></li>
      <li><a href="#/language/filters">Filters</a></li>
      <li><a href="#/language/includes">Includes</a></li>
      <li><a href="#/language/inheritance">Inheritance: Extends and Block</a></li>
      <li><a href="#/language/interpolation">Interpolation</a></li>
      <li><a href="#/language/iteration">Iteration</a></li>
      <li><a href="#/language/mixins">Mixins</a></li>
      <li><a href="#/language/plain-text">Plain Text</a></li>
      <li><a href="#/language/tags">Tags</a></li>
    </ul>
  </nav>
  <article id="content" class="md-github"></article>
</div>

<footer>
  <div class="box">Powered by HDK4.com, designed by xovel.</div>
</footer>

<a href="https://github.com/hdk4/garden/blob/master/src/docs/README.md" class="github-corner" aria-label="View source on Github">
  <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#202020; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
    <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
    <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
  </svg>
</a>

<!-- <script src="https://cdn.bootcss.com/marked/0.4.0/marked.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.js"></script>
<script src="https://cdn.bootcss.com/es6-promise/4.1.1/es6-promise.min.js"></script>
<script src="https://cdn.bootcss.com/fetch/2.0.4/fetch.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.6/highlight.min.js"></script>

<script src="https://cdn.bootcss.com/codemirror/5.38.0/codemirror.min.js"></script>
<script src="https://cdn.bootcss.com/codemirror/5.38.0/mode/pug/pug.min.js"></script>
<!-- <link href="https://cdn.bootcss.com/codemirror/5.38.0/codemirror.min.css" rel="stylesheet"> -->

<script src="../vendor/pug.js"></script>

<script>

var pug = require('pug');
var render = pug.render;

function _escape(html, encode) {
  return html
    .replace(!encode ? /&(?!#?\w+;)/g : /&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#39;');
}

function _highlight(lang, code) {
  var ret;
  try {
    ret = hljs.highlight(lang, code).value;
  } catch (e) {
    ret = _escape(code)
  }
  return ret;
}

window.config = {
  url: 'https://github.com/pugjs/pug-zh-cn',
  branch: 'master',
  rootPath: '/src',
  assetPath: '/',
  defaultPage: '/api/getting-started',
  markedOptions: {
    smartList: true
  },
  cache: 1,
  mapLink: {
    '#pugcompilesource-options': '#/api/reference#pug-compile-source-options-',
    '../language/filters.html#custom-filters': '#/language/filters#custom-filters',
    '#options': '#/api/reference#options',
    'reference.html#options': '#/api/reference#options',
    '../language/mixins.html': '#/language/mixins',
    '../language/attributes.html#attribute-interpolation': '#/language/attributes#attribute-interpolation',
    '../language/doctype.html#doctype-shortcuts': '#/language/doctype#doctype-shortcuts',
    '../language/tags.html#self-closing-tags': '#/language/tags#self-closing-tags',
    '#compiler-lexer-parser': '#/api/migration-v2#options',
    'reference.html#pugcompileclientsource-options': '#/api/reference#pug-compileclient-source-options-',
    'plain-text.html#whitespace-control': '#/language/plain-text#whitespace-control',
    '../api/migration-v2.html': '#/api/migration-v2',
    'mixins.html#mixin-attributes': '#/language/mixins#mixin-attributes',
    'plain-text.html': '#/language/plain-text',
    'attributes.html#boolean-attributes': '#/language/attributes#boolean-attributes',
    '../api/reference.html#options': '#/api/reference#options',
    'attributes.html': '#/language/attributes',
    '#custom-filters': '#/language/filters#custom-filters',
    'includes.html#including-filtered-text': '#/language/includes#including-filtered-text',
    'code.html#unbuffered-code': '#/language/code#unbuffered-code',
    'comments.html': '#/language/comments',
    'attributes.html#unescaped-attributes': '#/language/attributes#unescaped-attributes',
    'attributes.html#attributes': '#/language/attributes#attributes',
    'interpolation.html': '#/language/interpolation',
    'comments.html#conditional-comments': '#/language/comments#conditional-comments',
    'reference.html#pugcompilesource-options': '#/api/reference#pug-compile-source-options-',
    '../language/doctype.html#doctype-option': '#/language/doctype#doctype-option'
  },
  filterRaw: function (raw, uri) {
    // parameter-list
    raw = raw.replace(/(```+)parameter-list.*?\n([\s\S]*?)\1/g, function (a, b, c) {
      var ret = '<dl class="parameter-list">';
      c.replace(/(.+)\n~ (.+)\n~ (.+)/g, function (a, h, t, d) {
        ret += '<dt>' + h + '<span class="type">: ' + t + '</span></dt>';
        ret += '<dd class="description">' + marked(d) + '</dd>';
      });
      ret += '</dl>';
      return ret;
    });

    raw = raw.replace(/(:::+) float (\S+) (\S+) *\n([\s\S]*?)\1/g, function (a, b, c, d, e) {
      var ret = '<div class="alert alert-' + c + '">';
      ret += '<h4>' + d + '</h4>\n\n';
      ret += e;
      ret += '</div>\n';

      return ret;
    });

    window._list = [];

    raw = raw.replace(/(```+|~~~+)pug\-preview.*?\n([\s\S]*?)\1/g, function (a, b, c) {
      _list .push(c);
      return '<div id="_p' + _list.length + '"></div>';
    });

    return raw;
  },
  filterHTML: function (html, uri) {

    html = html.replace(/<div id="_p(\d+)"><\/div>/g, function (a, b) {
      var n = +b - 1;
      var c = _list[n];
      var ret = '<div class="preview-wrapper" data-control="interactive" data-index=' + n +'>';
      ret += '<div class="preview-left"><div>';
      ret += '<textarea class="preview-input">' + _escape(c) + '</textarea>';
      ret += '</div></div>';

      var _p = '';
      var ok = true;
      try {
        _p = _highlight('html', render(c));
      } catch(e) {
        ok = false;
        _p = e.toString();
      }

      ret += '<pre><code'+ (ok ? ' class="language-html"' : '') + ' id="preview-result-' + n + '">' + _p + '</code></pre>';

      ret += '</div>';

      return ret;

    });

    if (uri === '/language/doctype') {
      html = html.replace('<pre><code class="language-doctypes"></code></pre>', '<dl><dt>doctype html</dt><dd><pre class="cm-s-default"><code><span class="cm-meta">&lt;!DOCTYPE html&gt;</span></code></pre></dd><dt>doctype xml</dt><dd><pre class="cm-s-default"><code><span class="cm-meta">&lt;?xml</span> <span class="cm-meta">version="1.0" encoding="utf-8" ?&gt;</span></code></pre></dd><dt>doctype transitional</dt><dd><pre class="cm-s-default"><code><span class="cm-meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;</span></code></pre></dd><dt>doctype strict</dt><dd><pre class="cm-s-default"><code><span class="cm-meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</span></code></pre></dd><dt>doctype frameset</dt><dd><pre class="cm-s-default"><code><span class="cm-meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"&gt;</span></code></pre></dd><dt>doctype 1.1</dt><dd><pre class="cm-s-default"><code><span class="cm-meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"&gt;</span></code></pre></dd><dt>doctype basic</dt><dd><pre class="cm-s-default"><code><span class="cm-meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.1//EN" "http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd"&gt;</span></code></pre></dd><dt>doctype mobile</dt><dd><pre class="cm-s-default"><code><span class="cm-meta">&lt;!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd"&gt;</span></code></pre></dd><dt>doctype plist</dt><dd><pre class="cm-s-default"><code><span class="cm-meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></code></pre></dd></dl>');
    }

    return html;
  },
  onReady: function (html, uri) {
    document.querySelectorAll('.preview-input').forEach(function (item, index) {
      var _editor = CodeMirror.fromTextArea(item, {
        lineNumbers: true,
        mode: 'pug',
        resultId: 'preview-result-' + index
      });
      _editor.on('change', function () {
        var $result = document.getElementById(_editor.options.resultId);
        $result.className = 'language-html';
        var val = _editor.getValue();
        var _p = '';
        try {
          _p = _highlight('html', render(val));
        } catch(e) {
          $result.className = 'language-error';
          _p = e.toString();
        }
        $result.innerHTML = _p;
      });
    });
  }
};
</script>

<script src="../assets/docs.js"></script>

</body>
</html>
